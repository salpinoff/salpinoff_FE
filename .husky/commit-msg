#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

get_emoji() {
    local key=$1
    case $key in
        build) echo "ğŸ’š" ;;
        chore) echo "ğŸ“¦" ;;
        ci) echo "ğŸ”§" ;;
        docs) echo "ğŸ“" ;;
        feat) echo "âœ¨" ;;
        fix) echo "ğŸ›" ;;
        perf) echo "âš¡" ;;
        refactor) echo "â™»ï¸" ;;
        revert) echo "âªï¸" ;;
        style) echo "ğŸ¨" ;;
        test) echo ":white_check_mark:" ;;
        *) echo "" ;;
    esac
}

readonly type=$(grep -oE '^[a-zA-Z0-9]+' "$1")
readonly prefix=$(get_emoji "$type")

npx commitlint --edit $1

if [ -n "$prefix" ]; then
    sed -i ".bak" "1s/^[^[:space:]]*/$prefix &/" "$1"
fi
